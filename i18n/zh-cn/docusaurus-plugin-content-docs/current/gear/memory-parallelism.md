---
sidebar_label: '内存并行'
sidebar_position: 4
---

# 内存并行

每个程序的独立内存空间，允许在 Gear 节点上进行并行化消息处理。并行处理流的数量等于 CPU 内核数。每个流将处理用于一组已定义程序的消息。它与从其他程序或外部（用户交易）发送的消息有关。

例如，给定一个包含针对 100 个不同程序的消息队列，Gear 节点在一个配置了 2 个处理线程的网络上运行。Gear 引擎使用运行时定义的流的数量（等于典型验证机的 CPU 核心数量），将目标程序的总量划分为流的数量，并为每个流创建一个消息池（每个流 50 个程序）。

程序被分配到独立的流中，每条消息都出现在定义了其目标程序的流中。因此，所有发给某个特定程序的消息都出现在一个处理流中。

在每个周期中，一个目标程序可以有一个以上的消息，一个流为大量程序处理消息。消息处理的结果是来自每个流的一组新消息被添加到消息队列中，然后循环往复。在消息处理过程中产生的结果消息通常被发送到另一个地址（返回原点或到下一个程序）。

![alt text](/assets/message-parallelism.jpg)
